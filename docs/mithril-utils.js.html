<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: mithril-utils.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"pvjs","disqus":"false","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"","description":"","keyword":""},"linenums":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">pvjs</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="mithril-utils.js.html">Source: mithril-utils.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>var _ = require('lodash');
var highland = require('highland');
var m = require('mithril');

/**
 * Convert an input into an array, if it is not already.
 *
 * @param {*} arg
 * @return {array} arrayified version on input arg
 */
function arrayify(arg) {
  return _.isArray(arg) ? arg : [arg];
}

/**
 * Convert an input into an array, if it is not already.
 * If the input is falsey but not false or 0, return an empty array.
 *
 * @param {*} arg
 * @return {array} arrayified version on input arg
 */
function arrayifyClean(arg) {
  if (!arg &amp;&amp; arg !== false &amp;&amp; arg !== 0) {
    return [];
  }
  return arrayify(arg);
}

/* Convert a highland stream into a mithril promise
 * @param {stream} highlandStream
 * @result {promise} mithrilPromise See
 *  http://lhorie.github.io/mithril/mithril.deferred.html#differences-from-promises-a-
 */
function promisify(highlandStream) {
  //tell Mithril to wait for this service to complete before redrawing
  m.startComputation();
  var deferred = m.deferred();

  highlandStream.toArray(function(results) {
    deferred.resolve(results);
    //the service is done, tell Mithril that it may redraw
    m.endComputation();
  });

  return deferred.promise;
}

var promisifiedProp = highland.compose(m.prop, promisify);

/**
 * This function generically propifies the value of
 * every property on an object. The propify functions
 * in the specific component files only propify the
 * properties that are needed.
 *
 * @param {stream} highlandStream
 * @return
 */
function propify(highlandStream) {
  return highlandStream.flatMap(function(item) {
    return highland.pairs(item).reduce({}, function(accumulator, pair) {
      var key = pair[0];
      var value = pair[1];
      accumulator[key] = m.prop(value);
      return accumulator;
    });
  });
}

module.exports =  {
  arrayify: arrayify,
  arrayifyClean: arrayifyClean,
  promisify: promisify,
  promisifiedProp: promisifiedProp,
  propify: propify
};
</code></pre>
        </article>
    </section>






        
        <!-- disqus code -->
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <!-- // disqus code -->
        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Wed Jun 03 2015 16:06:48 GMT-0700 (PDT)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
